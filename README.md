# 《C和指针》简介

本书提供与C语言编程相关的全面资源和深入讨论。本书通过对指针的基础知识和高级特性的探讨，帮助程序员把指针的强大功能融入到自己的程序中去。

全书共18章，覆盖了数据、语句、操作符和表达式、指针、函数、数组、字符串、结构和联合等几乎所有重要的C编程话题。书中给出了很多编程技巧和提示，每章后面有针对性很强的练习，附录部分则给出了部分练习的解答。

本书适合C语言初学者和初级C程序员阅读，也可作为计算机专业学生学习C语言的参考。

# 丛书信息

C和C++经典著作 (共5册), 这套丛书还有 《C专家编程》,《C陷阱与缺陷》,《C++沉思录》,《C++Templates中文版》

# 警告与提示

## 快速上手

### 警告

- 在 scanf 函数的标量参数前未添加 & 字符
- 机械地把 printf 函数的格式代码照搬于 scanf 函数
- 在应该使用 && 操作符的地方误用了 & 操作符
- 误用 = 操作符而不是 == 操作符来测试相等性

### 提示

- 使用 #include 指令避免重复声明
- 使用 #define 指令给常量值取名
- 在 #include 文件中放置函数原型
- 在使用下标前先检查它们的值
- 在 while 或 if 表达式中蕴含赋值操作
- 如何编写一个空循环体（使用;）
- 始终要进行检查，确保数组不越界（编译器不会报错，建议使用小工具 cppcheck）

## 基本概念

### 警告

- 字符串常量中的字符被错误的解释为三字母词
- 编写的糟糕的注释可能会意外地中止语句
- 注释的不适当结束

### 提示

**良好的风格和文档将使程序更容易阅读与维护**

## 数据

### 警告

- 在声明指针变量时采用容易误导的写法
- 误解指针声明中初始化的含义

### 提示

- 为了保持最佳的可移植性，把字符的值限制在有符号和无符号字符范围的交集之内，或者不要在字符上执行算术运算
- 用它们在使用时最自然的形式来表示字面值
- 不要把整形值和枚举值混在一起使用
- 不要依赖隐式声明
- 在定义类型的新名字时，使用 typedef 而不是 #define
- 用 const 声明其值不会修改的变量
- 使用名字常量而不是字面值常量
- 不要在嵌套的代码块之间使用相同的变量名
- 除了实体的具体定义之外，在它的其他声明位置都使用 extern 关键字

## 语句

### 警告

- 编写不会产生任何结果的表达式
- 确信在 if 语句中的语句列表前后加上花括号
- 在 switch 语句中，执行流意外地从一个 case 顺延到下一个 case

### 提示

- 在一个没有循环体的循环中，用一个分号表示空语句，并让它独占一行
- for 循环的可读性比 while 循环强，因为它把用于控制循环的表达式收集起来放在一个地方
- 在每个 switch 语句中都使用 default 子句

## 操作符和表达式

### 警告

- 有符号值的右移位操作是不可移植的
- 移位操作的位数是个负值
- 连续赋值中各个变量的长度y不一
- 误用 = 而不是 == 进行比较
- 误用 | 而不是 ||，误用 & 而不是 &&
- 在不同的用于表示布尔值的非零值之间进行比较
- 表达式赋值的位置并不决定表达式计算的精度
- 编写结果依赖于求值顺序的表达式

### 提示

- 使用复合赋值符可以使程序更易于维护
- 使用条件操作符替代 if 语句可以简化表达式
- 使用逗号操作符k来消除多余的代码
- 不要混用整形和布尔型值

## 指针

### 警告
- 错误地对一个未初始化的指针变量进行解引用
- 错误地对一个 NULL 指针进行解引用
- 向函数传递错误地传递 NULL 指针
- 未检测指针表达式的错误，从而导致不可预料的结果
- 对一个指针进行减法运算，使它非法地指向了数组第 1 个元素的前面的内存位置

### 提示
- 一个值应该只具有一种意思
- 如果指针并不指向任何有意义的东西，就把它设置为 NULL

## 函数

### 警告
- 错误地在其他函数的作用域内编写函数原型
- 没有为那些返回值不是整形的函数编写原型
- 把函数原型和旧式风格的函数定义混合使用
- 在 va_arg 中使用错误的参数类型，导致未定义的结果

### 提示
- 在函数原型中使用参数名，可以给使用该函数的用户提供更多的信息
- 抽象数据类型可以减少抽象对模块实现细节的依赖，从而提高程序的可靠性
- 当递归定义清晰的优点可以补偿它的效率开销时，就可以使用这个工具

## 数组
### 警告
- 当访问多维数组的元素时，误用逗号分隔下标
- 在一个指向未指定长度的数组的指针上执行指针运算

### 提示
- 一开始就编写良好的代码显然比依赖编译器来修正劣质代码更好
- 源代码的可读性几乎总比程序运行时效率更为重要
- 只要有可能，函数的指针形参都应该声明为 const
- 在有些环境中，使用 register 关键字提高程序的x运行时效率
- 在多维数组的初始值列表中使用完整的多层花括号能提高可读性



